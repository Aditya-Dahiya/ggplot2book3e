---
title: "Chapter 11"
subtitle: "Colour Scales and Legends"
author: "Aditya Dahiya"
date: "2024-01-01"
format: 
  html: 
    code-fold: true
    code-copy: hover
    code-link: true
execute: 
  echo: true
  warning: false
  error: false
  cache: true
filters:
  - social-share
share:
  permalink: "https://aditya-dahiya.github.io/ggplot2book3e/Chapter11.html"
  description: "Solutions Manual (and Beyond) for ggplot2: Elegant Graphics for Data Analysis (3e)"
  twitter: true
  facebook: true
  linkedin: true
  email: true
  mastodon: true
editor_options: 
  chunk_output_type: console
bibliography: references.bib
---

::: {.callout-note appearance="minimal"}
This Chapter has no exercises to solve, so I use datasets to explore and customize colour scales and legends in `ggplot2`.
:::

# **11.3 Discrete colour scales**

Let's use the [data](#0 "What We Watched: A Netflix Engagement Report") on Engagement (Hours Watched) report from [Netflix](#0) which lists, in descending order, all 18,000+ titles viewed for 50,000+ hours on the platform in the first half of 2023. Credits to the [Data is Plural](#0) podcast by [Jeremy Singer-Vine](#0) for circulating this data-set. I use it with `ggwordcloud` [@ggwordcloud] to make word-clouds of top Netflix Titles.

```{r}
library(tidyverse)
library(readxl)
library(ggwordcloud)
library(lubridate)

set.seed(42)
netflix <- read_csv(here::here("data", "netflix.csv")) |> 
  slice_head(n = 100) |> 
  janitor::clean_names() |> 
  select(1:3) |> 
  mutate(title = str_remove_all(title, "[^[\\da-zA-Z ]]")) |> 
  mutate(title = str_replace(title, "\\s{3,}.*", "")) |> 
  mutate(month = floor_date(release_date, unit = "month"),
         year = year(release_date))
```

The @fig-default shows the top 10 titles on Netflix by number of hours viewed between January - June 2023, with default colour schemes in ggplot2.

```{r}
#| label: fig-default
#| fig-cap: "Top 10 titles on Netflix by number of hours viewed: January - June 2023"
#| fig-subcap: 
#|   - "A horizontal Bar-Chart"
#|   - "A wordcloud"

g1 <- netflix |> 
  slice_max(order_by = hours_viewed, n = 10) |> 
  ggplot(aes(
    x = hours_viewed, 
    y = reorder(title, hours_viewed),
    fill = title,
    label = title)) +
  geom_col() +
  geom_text(aes(x = 0),
            hjust = "inward",
            vjust = 0.5) +
  labs(x = "Hours viewed on Netflix", y = NULL,
       title = "Top 10 titles on Netflix",
       subtitle = "By number of hours viewed: January - June 2023") +
  scale_x_continuous(expand = expansion(0),
                     labels = scales::label_number_si()) +
  theme_minimal() +
  theme(legend.position = "none",
        axis.text.y = element_blank(),
        panel.grid.minor = element_blank(),
        panel.grid.major.y = element_blank())

g2 <- netflix |> 
  mutate(title = str_replace(title, " Season\\s.*", "")) |> 
  slice_max(order_by = hours_viewed, n = 40) |> 
  ggplot(aes(label = title, 
             size = hours_viewed,
             color = hours_viewed)) +
  geom_text_wordcloud(shape = "circle") +
  scale_size_area(max_size = unit(10, "mm")) +
  labs(title = "Word cloud of top 30 titles on Netflix (Jan-Jun 2023)") +
  theme_minimal() +
  theme(plot.title = element_text(hjust = 0.5))

g1
g2
```

The @fig-default2 shows the same plots with `paletteer` [@paletteer] scales.

```{r}
#| label: fig-default2
#| fig-cap: "Top 10 titles on Netflix by number of hours viewed: January - June 2023"
#| fig-subcap: 
#|   - "A horizontal Bar-Chart"
#|   - "A wordcloud"

library(paletteer)

g1 + scale_fill_paletteer_d("ggthemes::Winter")

g2 + scale_color_paletteer_c("oompaBase::redscale")
```

## Some Packages for colour palettes in `R`

-   **`RColorBrewer`:**
    -   This package sources color palettes from ColorBrewer, delivering a diverse range of qualitative, sequential, and diverging color schemes for ggplot.
-   **`viridis`:**
    -   Designed for both colorblind individuals and black-and-white printing, viridis provides perceptually uniform color maps that enhance data visualization.
-   **`viridisLite`:**
    -   A streamlined version of viridis, viridisLite offers the same high-quality color maps with reduced dependencies for efficient use in ggplot.
-   **`wesanderson`:**
    -   Inspired by Wes Anderson films, this package provides a unique and aesthetically pleasing set of color palettes, adding a distinctive touch to ggplot visuals.
-   **`ggsci`:**
    -   Drawing inspiration from scientific journals like Nature and Science, ggsci offers color palettes that lend a professional and research-oriented look to ggplot visualizations.
-   **`nord`:**
    -   Inspired by the Nord color scheme, this package delivers modern and elegant color palettes for ggplot, adding a contemporary feel to data visualizations.
-   **`iWantHue`:**
    -   Enabling users to generate and explore color palettes based on criteria such as color count and harmony, iWantHue provides flexibility and customization for ggplot visuals.
-   **`colorspace`:**
    -   Based on the HCL (Hue-Chroma-Luminance) color space, colorspace offers perceptually uniform and visually appealing color palettes for ggplot, enhancing the aesthetic quality of visualizations.
-   **`dichromat`:**
    -   Specifically catering to individuals with color vision deficiencies, dichromat provides color palettes that prioritize accessibility for improved data visualization experiences in ggplot.
-   **`ggthemes`:**
    -   Inspired by popular data visualization libraries and software like Excel, Tableau, and Stata, ggthemes offers a variety of color palettes and themes to diversify ggplot visuals.
